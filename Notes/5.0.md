---
date: 
tags: 
note quality: 
mooc link: 
note links: 
finished:
---
________________________
# Internet Layer Overview

The Internet Layer (TCP/IP model) routes packets across networks using IP addresses.  It's positioned between the Transport and Network Access Layers, enabling logical communication across diverse networks. It's the "thin waist" of the Internet, primarily using IP.

## Core Concepts

*   **Logical Addressing:**  IP addresses (like mailing addresses), independent of physical location.
*   **Routing:**  Finding packet paths (routers = post offices, protocols = postal routes).
*   **Packetization:**  Encapsulating segments into IP Datagrams.
*   **Fragmentation/Reassembly:**  Handling packets larger than the network's MTU.
*   **Connectionless Service:** Best-effort delivery.
*   **IP (Internet Protocol):** Main protocol (IPv4, IPv6).
*   **Hop-by-hop delivery:** Router-to-router.

## Key Functions

*   **Packet forwarding:**  Data plane moves packets.
*   **Policies:** QoS, ACLs.
*   **Efficient transmission:**  Minimize delay.
*   **Routing:** Control plane determines routes, maintains tables (OSPF, BGP, RIP).
*   **Topology management:**  Updates network topology.
*   **Route selection:**  Optimal path computation.
*   **Error Handling:** ICMP (e.g., "Destination Unreachable").

## Data Plane vs Control Plane

*   **Data Plane:** *Moves* packets (forwarding, NAT, filtering). High-speed, real-time.
*   **Control Plane:** *Determines* routes (routing protocols, topology). Slower, background operations.

# IP Addressing

## IPv4

*   32-bit addresses (e.g., 192.168.1.1).
*   ~4.3 billion addresses.

**Address Classes (Historical):**

*   A (Large), B (Medium), C (Small), D (Multicast), E (Experimental).

**Special Addresses:**

*   **Private:**  10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 (used with NAT).
*   **Loopback:** 127.0.0.1.
*   **Broadcast:** 255.255.255.255.
*   **Link-Local (APIPA):** 169.254.0.0/16.

## CIDR

*   Flexible subnetting (a.b.c.d/x).
*   Efficient address use.

## Hierarchical Addressing

*   Efficient routing advertisement.
*   ISPs allocate blocks; simplifies routing.

## Address Acquisition

*   **Host:** Hard-coded or DHCP.
*   **Network:** From ISP.
*   **ISP:** From ICANN/RRs.

## IPv4 Exhaustion

*   Addressed depleted (2011).
*   NAT provides short-term relief; IPv6 is the long-term solution.

# DHCP

*   **Goal:** Dynamic IP address assignment.
*   **Process:** Discover, Offer, Request, ACK.
*   **Provides:** IP, gateway, DNS, subnet mask.
*    DHCP server usually in a router.

# NAT

*   **Shares one public IP** for a local network (using private IPs).
*   **Advantages:** Conserves IPs, security, flexibility.
*   **Router Implementation:** Translates source/destination IP/port in outgoing/incoming datagrams, using a NAT table.
*   **Criticism:** Violates layering, end-to-end principle.

## Subnets

*   Devices reachable *without* a router.
*   IP address: Subnet part (high-order bits) + host part.
*   Subnet mask (e.g., /24) identifies the subnet.

# Routing and Forwarding

*   **Forwarding:** *Moving* packets through a router (data plane).
*   **Routing:** *Planning* the path (control plane).

## Routing Table

*   Destination network, next hop, interface, metric, administrative distance.

## Routing Types

*   **Static:** Manual configuration. Simple, but not scalable or adaptive.
*   **Dynamic:** Automatic updates (routing protocols). Scalable, adaptive, but more complex.

## Routing Metrics

*   Hop count, latency, bandwidth, reliability, load, MTU, cost.

# Routing Protocols

## RIP

*   Distance-vector, hop count (max 15). Simple, for small networks.

## OSPF

*   Link-state, Dijkstra's algorithm. Hierarchical, fast convergence.

## BGP

*   Path-vector, for Internet backbone (between ASes). Policy-based.

# IPv6

## Motivation

*   IPv4 address exhaustion.
*   Faster processing, flow support.

## Header

*   128-bit addresses.
*   *No* checksum, fragmentation, or options (uses extension headers).

## Transition

*   Gradual deployment.
*   **Dual-stack:** IPv4 and IPv6.
*   **Tunneling:** IPv6 within IPv4.
*  **Translation**

## Adoption

*   Slow but progressing (~30% Google, 1/3 US Gov.).